{"ast":null,"code":"var _jsxFileName = \"/Users/madisonmccardle/PCA/javascipt/react/hacker-news-react-apollo/src/components/Link.js\";\nimport React, { Component } from 'react';\nimport { AUTH_TOKEN } from '../constants';\nimport { timeDifferenceForDate } from '../utils';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\n\nclass Link extends Component {\n  render() {\n    const VOTE_MUTATION = gql`\n      mutation VoteMutation($linkId: ID!) {\n        vote(linkId: $linkId) {\n          id\n          link {\n          id\n            votes {\n              id\n              user {\n                id\n              }\n            }\n          }\n          user {\n            id\n          }\n        }\n      }\n    `;\n    const authToken = localStorage.getItem(AUTH_TOKEN);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex mt2 items-start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"gray\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }\n    }, this.props.index + 1, \".\"), authToken && /*#__PURE__*/React.createElement(Mutation, {\n      mutation: VOTE_MUTATION,\n      variables: {\n        linkId: this.props.link.id\n      },\n      update: (store, {\n        data: {\n          vote\n        }\n      }) => this.props.updateStoreAfterVote(store, vote, this.props.link.id) // update function that you’re passing as prop to the <Mutation /> component will be called directly after the server returned the response.\n      // It receives the payload of the mutation (data) and the current cache (store) as arguments. You can then use this input to determine a new state for the cache\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }, voteMutation => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml1 gray f11\",\n      onClick: voteMutation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, \"\\u25B2\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, this.props.link.description, \" (\", this.props.link.url, \")\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"f6 lh-copy gray\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, this.props.link.votes.length, \" votes | by\", ' ', this.props.link.postedBy ? this.props.link.postedBy.name : 'Unknown', ' ', timeDifferenceForDate(this.props.link.createdAt))));\n  }\n\n}\n\nexport default Link;","map":{"version":3,"sources":["/Users/madisonmccardle/PCA/javascipt/react/hacker-news-react-apollo/src/components/Link.js"],"names":["React","Component","AUTH_TOKEN","timeDifferenceForDate","Mutation","gql","Link","render","VOTE_MUTATION","authToken","localStorage","getItem","props","index","linkId","link","id","store","data","vote","updateStoreAfterVote","voteMutation","description","url","votes","length","postedBy","name","createdAt"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,qBAAT,QAAsC,UAAtC;AAEA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;;AAEA,MAAMC,IAAN,SAAmBL,SAAnB,CAA6B;AAC3BM,EAAAA,MAAM,GAAG;AACP,UAAMC,aAAa,GAAGH,GAAI;;;;;;;;;;;;;;;;;;KAA1B;AAoBA,UAAMI,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqBT,UAArB,CAAlB;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwB,KAAKU,KAAL,CAAWC,KAAX,GAAmB,CAA3C,MADF,EAEGJ,SAAS,iBACR,oBAAC,QAAD;AACE,MAAA,QAAQ,EAAED,aADZ;AAEE,MAAA,SAAS,EAAE;AAAEM,QAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWG,IAAX,CAAgBC;AAA1B,OAFb;AAGE,MAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,QAAAA,IAAI,EAAE;AAAEC,UAAAA;AAAF;AAAR,OAAR,KACN,KAAKP,KAAL,CAAWQ,oBAAX,CAAgCH,KAAhC,EAAuCE,IAAvC,EAA6C,KAAKP,KAAL,CAAWG,IAAX,CAAgBC,EAA7D,CAJJ,CAME;AACA;AAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASGK,YAAY,iBACX;AAAK,MAAA,SAAS,EAAC,cAAf;AAA8B,MAAA,OAAO,EAAEA,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ,CAHJ,CADF,eAuBE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKT,KAAL,CAAWG,IAAX,CAAgBO,WADnB,QACkC,KAAKV,KAAL,CAAWG,IAAX,CAAgBQ,GADlD,MADF,eAIE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKX,KAAL,CAAWG,IAAX,CAAgBS,KAAhB,CAAsBC,MADzB,iBAC4C,GAD5C,EAEG,KAAKb,KAAL,CAAWG,IAAX,CAAgBW,QAAhB,GACG,KAAKd,KAAL,CAAWG,IAAX,CAAgBW,QAAhB,CAAyBC,IAD5B,GAEG,SAJN,EAIiB,GAJjB,EAKGxB,qBAAqB,CAAC,KAAKS,KAAL,CAAWG,IAAX,CAAgBa,SAAjB,CALxB,CAJF,CAvBF,CADF;AAwCD;;AA/D0B;;AAkE7B,eAAetB,IAAf","sourcesContent":["import React, { Component } from 'react'\n\nimport { AUTH_TOKEN } from '../constants'\nimport { timeDifferenceForDate } from '../utils'\n\nimport { Mutation } from 'react-apollo'\nimport gql from 'graphql-tag'\n\nclass Link extends Component {\n  render() {\n    const VOTE_MUTATION = gql`\n      mutation VoteMutation($linkId: ID!) {\n        vote(linkId: $linkId) {\n          id\n          link {\n          id\n            votes {\n              id\n              user {\n                id\n              }\n            }\n          }\n          user {\n            id\n          }\n        }\n      }\n    `\n\n    const authToken = localStorage.getItem(AUTH_TOKEN)\n    return (\n      <div className=\"flex mt2 items-start\">\n        <div className=\"flex items-center\">\n          <span className=\"gray\">{this.props.index + 1}.</span>\n          {authToken && (\n            <Mutation\n              mutation={VOTE_MUTATION}\n              variables={{ linkId: this.props.link.id }}\n              update={(store, { data: { vote } }) =>\n                this.props.updateStoreAfterVote(store, vote, this.props.link.id)\n              }\n              // update function that you’re passing as prop to the <Mutation /> component will be called directly after the server returned the response.\n              // It receives the payload of the mutation (data) and the current cache (store) as arguments. You can then use this input to determine a new state for the cache\n            >\n              {voteMutation => (\n                <div className=\"ml1 gray f11\" onClick={voteMutation}>\n                  ▲\n                </div>\n              )}\n            </Mutation>\n          )}\n          {/* adding the ability to call the voteMutation inside our functional component by using the <Mutation /> component\n          (also we’re passing VOTE_MUTATION and link.id as props). */}\n        </div>\n        <div className=\"ml1\">\n          <div>\n            {this.props.link.description} ({this.props.link.url})\n          </div>\n          <div className=\"f6 lh-copy gray\">\n            {this.props.link.votes.length} votes | by{' '}\n            {this.props.link.postedBy\n              ? this.props.link.postedBy.name\n              : 'Unknown'}{' '}\n            {timeDifferenceForDate(this.props.link.createdAt)}\n            {/*  timeDifferenceForDate gets passed the createdAt information for each link.\n            The function will take the timestamp and convert it to a string that’s more user friendly, e.g. \"3 hours ago\". */}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Link"]},"metadata":{},"sourceType":"module"}